# -----------------------------------------------------------------------
# DEVELOPMENT CONFIGURATION
# -----------------------------------------------------------------------
applicationName: "fastapi-microservice-template"
environment: "dev"
namespace: "test-apps"
replicaCount: 1

containerPort: 8080
contextPath: "/fastapi-microservice-template"

# Image: harbor.tatahostit.com/library/fastapi-microservice-template:dev-latest
image:
  registry: "harbor.tatahostit.com"
  project: "library"
  tag: ""
  pullPolicy: Always # Always pull to get the latest code changes

# -----------------------------------------------------------------------
# NETWORKING
# -----------------------------------------------------------------------
ingress:
  enabled: true
  className: "nginx-public"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
  hosts:
    - host: test.tatahostit.com
      paths:
        - path: /fastapi-microservice-template
          pathType: Prefix
  tls:
    - secretName: test-tatahostit-com-tls  # <--- Shared Certificate Secret
      hosts:
        - test.tatahostit.com

# -----------------------------------------------------------------------
# RESOURCES & PROBES
# -----------------------------------------------------------------------
resources:
  requests:
    cpu: "50m"
    memory: "128Mi"
  limits:
    cpu: "250m"
    memory: "512Mi"

# Disable probes in Dev to allow faster startup/debugging if app is unhealthy
livenessProbe:
  enabled: false
readinessProbe:
  enabled: false
startupProbe:
  enabled: false

# -----------------------------------------------------------------------
# CONFIGURATION
# -----------------------------------------------------------------------
env:
  LOG_LEVEL: "debug"

autoscaling:
  enabled: false

serviceMonitor:
  enabled: false